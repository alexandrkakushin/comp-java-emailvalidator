# E-mail валидатор

![build](https://github.com/alexandrkakushin/comp-java-emailvalidator/workflows/build/badge.svg)

Часть конфигурации <a href = "https://github.com/alexandrkakushin/comp-java">Компоненты Java</a>  

Компонента для проверки валидности электронной почты

Доступные методы:
<ul>
  <li>
    ЭтоВалидный(АдресЭП, ДоменВторогоУровня = Истина, ОписаниеОшибки = Неопределено)
  </li>
</ul>

## Установка

Компонента устанавливается/обновляется интерактивно, для этого в справочнике "Компоненты Java" размещены соответствующие команды.

## Подключение

Ниже приведен пример подключения компоненты

``` 1С:Enterprise

///////////////////////////////////////////////////////////////////////////////
// Компоненты

#Область Компоненты

// "Объект" EMailValidator
// 
// Возвращаемое значение:
//  Обработка - Объект метаданных
//
Функция EMailВалидатор() Экспорт
	
	Возврат ИнтерфейсКомпоненты("comp-java-emailvalidator");
	
КонецФункции

#КонецОбласти

Функция ИнтерфейсКомпоненты(Репозиторий)
	
	Компонента = КомпонентыJava.КомпонентаПоРепозиторию(Репозиторий);
	Если Не ЗначениеЗаполнено(Компонента) Тогда
		ОписаниеОшибки = Неопределено;
		Если Не КомпонентыJava.УстановитьКомпоненту(Репозиторий, ОписаниеОшибки) Тогда
			ВызватьИсключение ОписаниеОшибки;			
		КонецЕсли;
				
		Компонента = КомпонентыJava.КомпонентаПоРепозиторию(Репозиторий);
	КонецЕсли;
	
	Возврат КомпонентыJava.Интерфейс(Компонента);	
	
КонецФункции
```
## Использование
В дальнейшем для получения функционала "Email-валидатор" достаточно реализовать вызов 

``` 1С:Enterprise
Функция EmailВалиден(АдресЭП, ОписаниеОшибки = Неопределено) Экспорт
	
	Если НЕ ЗначениеЗаполнено(АдресЭП) Тогда
		Возврат Истина;
	КонецЕсли;
		
	Результат = Ложь;
		
	EMailВалидатор = КомпонентыJavaAPI.EMailВалидатор();  
	ВалидностьАдреса = EMailВалидатор.ЭтоВалидный(АдресЭП, Истина, ОписаниеОшибки);
	Если ВалидностьАдреса <> Неопределено Тогда
		Результат = ВалидностьАдреса;
	КонецЕсли;
	
	Возврат Результат;
	
КонецФункции
```
